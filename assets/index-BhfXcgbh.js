import{r as s,j as e,C as p,d as j,e as N,f as v,g as b,h as C,i as S,k as R,l as y}from"./index-DsrYNWWU.js";import{r as u}from"./consts-DGBgHmTl.js";function z(){const[t,f]=s.useState(),[l,h]=s.useState(0),[c,m]=s.useState(0),x=s.useRef(null),d=s.useRef(null),r=s.useMemo(()=>window.innerWidth<768?0:window.innerWidth<1280?1:2,[]),i=s.useCallback(n=>{const o=n.slidesInView();o.length===n.slideNodes().length&&n.off("slidesInView",i),h(o[0])},[]),a=s.useCallback(()=>{if(d.current){const n=d.current.offsetHeight;n!==c&&m(n)}},[c]);s.useEffect(()=>{const n=()=>{a()};return window.addEventListener("resize",n),()=>{window.removeEventListener("resize",n)}},[a]),s.useEffect(()=>{if(t)return t.on("slidesInView",i),t.on("reInit",i),()=>{t.off("slidesInView",i),t.off("reInit",i)}},[t,i]),s.useEffect(()=>{a()},[l,a]);const g=u.length>r,w=s.useMemo(()=>Array.from({length:u.length-r}),[u.length,r]);return{api:t,setApi:f,activeSlide:l,activeSlideRef:d,containerHeight:c,slidesToShow:r,shouldShowPagination:g,paginationDots:w,carouselRef:x}}function H(){const{api:t,setApi:f,activeSlide:l,activeSlideRef:h,containerHeight:c,slidesToShow:m,shouldShowPagination:x,paginationDots:d,carouselRef:r}=z();return e.jsxs("section",{id:"reviews",className:"flex flex-col relative pt-8",children:[e.jsx("h2",{className:"text-center z-20 max-md:text-h4",children:"Отзывы"}),e.jsx("div",{ref:r,className:"transition-all duration-300 ease-in-out",children:e.jsxs(p,{setApi:f,opts:{align:"start",inViewThreshold:.5,watchDrag:window.innerWidth<1024},style:{height:c+64},className:"w-full self-center z-20 transition-all ease-out",children:[e.jsx(j,{className:"flex py-8",children:u.map(({id:i,name:a,city:g,avatar:w,review:n},o)=>e.jsx(N,{className:"xs:basis-px-1/1 md:basis-1/2 xl:basis-1/3",children:e.jsxs(v,{className:b("bg-background p-5 border-none transition-shadow ease-out duration-200 md:h-full max-md:shadow-lg",o>=l&&o<=l+m&&"shadow-lg"),ref:o===l?h:null,children:[e.jsxs(C,{className:"flex flex-row p-0 gap-4",children:[e.jsx("img",{className:"flex size-11 bg-primary rounded-full",src:w||"default-avatar.png"}),e.jsxs("div",{className:"w-[calc(100%-3.75rem)]",children:[e.jsx("h6",{className:"font-semibold",children:a}),e.jsx("p",{className:"font-normal text-[12px]/[16px]",children:g})]})]}),e.jsx(S,{className:"flex items-center justify-center px-0 py-5",children:e.jsx("p",{className:"text-[14px]/[24px] font-normal text-foreground",children:n})})]})},i))}),e.jsx(R,{className:"max-lg:hidden"}),e.jsx(y,{className:"max-lg:hidden"})]})}),x&&e.jsx("div",{className:"flex justify-center gap-4 z-20 pb-8",children:d.map((i,a)=>e.jsx("button",{onClick:()=>t==null?void 0:t.scrollTo(a),"aria-label":`Go to slide ${a+1}`,className:`size-2 rounded-full ${a===l?"bg-primary":"bg-gray-400"}`},a))}),e.jsx("span",{className:"absolute z-10 inset-0 -mx-[calc(100vw-100%)] bg-inputBg"})]})}export{H as Reviews};
